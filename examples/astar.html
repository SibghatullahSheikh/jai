<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>jAI - Javascript artificial intelligence library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      #astar div {
        width:100px;
        height:100px;
        float: left;
        border:1px solid black;
        background:red;
      }
      #astar h2 {
        text-align:center;
        margin-top: 37px;
        font-size: 25px;
        color: white;
      }
    </style>
    <link href="../css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="../ico/favicon.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../">jAI</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="../">Home</a></li>
              <li><a href="../docs/">Documentation</a></li>
              <li><a href="//github.com/elfathorn">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span2">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span10" id="astar">
          <div id="div_x-2y-2"></div>
          <div id="div_x-1y-2"></div>
          <div id="div_x0y-2"></div>
          <div id="div_x1y-2"></div>
          <div id="div_x2y-2"></div>

          <div style="clear:both;float:none;width:0px;border:0;height:0;"></div>

          <div id="div_x-2y-1"></div>
          <div id="div_x-1y-1"></div>
          <div id="div_x0y-1"></div>
          <div id="div_x1y-1"></div>
          <div id="div_x2y-1"></div>

          <div style="clear:both;float:none;width:0px;border:0;height:0;"></div>

          <div id="div_x-2y0"></div>
          <div id="div_x-1y0"></div>
          <div id="div_x0y0"></div>
          <div id="div_x1y0"></div>
          <div id="div_x2y0"></div>

          <div style="clear:both;float:none;width:0px;border:0;height:0;"></div>

          <div id="div_x-2y1"></div>
          <div id="div_x-1y1"></div>
          <div id="div_x0y1"></div>
          <div id="div_x1y1"></div>
          <div id="div_x2y1"></div>

          <div style="clear:both;float:none;width:0px;border:0;height:0;"></div>

          <div id="div_x-2y2"></div>
          <div id="div_x-1y2"></div>
          <div id="div_x0y2"></div>
          <div id="div_x1y2"></div>
          <div id="div_x2y2"></div>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jai.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {
      var map = new JAI.Map(-2, 2, -2, 2);
      var astar = new JAI.Astar(map);

      astar.init(-2, -2, 2, 1);

      $('#div_x' + astar.start.x + 'y' + astar.start.y).html('<h2>START</h2>');
      $('#div_x' + astar.end.x + 'y' + astar.end.y).html('<h2>END<h2>');

      $('#div_x' + astar.start.x + 'y' + astar.start.y).css('background', 'green');
      $('#div_x' + astar.end.x + 'y' + astar.end.y).css('background', 'green');

      if (astar.run()) {
        var index = astar.close_list.find(astar.end.x, astar.end.y);
        var current = astar.close_list.content[index];

        $('#div_x' + current[0] + 'y' + current[1]).css('background', 'green');

        var path = current[0]+','+current[1]+':::';
        var prec_key = current[2].parent_key;
        $('#div_' + prec_key.replace(":", "")).css('background', 'green');
        var infos = prec_key.split(":y");
        var prec_x = infos[0].split("x")[1];
        var prec_y = infos[1];
        path += prec_x+','+prec_y+':::';

        while (!(prec_x == astar.start.x && prec_y == astar.start.y)){
            var index_prec = astar.close_list.find(prec_x, prec_y);
            var precedent = astar.close_list.content[index_prec][2];

            prec_key = precedent.parent_key;
            infos = prec_key.split(":y");
            prec_x = infos[0].split("x")[1];
            prec_y = infos[1];
            path += prec_x+','+prec_y+':::';
            $('#div_' + prec_key.replace(":", "")).css('background', 'green');
        }
      } else {
        alert('no solution');
      };
    });
      
    </script>

  </body>
</html>
